<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>§ 28 FamGKG - Wertgebühren</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
</head>
<body>

<div class="container mt-5">
    <h2 class="text-center">§ 28 FamGKG - Wertgebühren</h2>
    Wenn sich die Gebühren nach dem Verfahrenswert richten, beträgt bei einem Verfahrenswert bis 500 Euro die Gebühr 38
    Euro. Die Gebühr erhöht sich bei einem
    <table class="table table-bordered table-striped mt-4">
        <thead class="thead-dark">
        <tr>
            <th>Verfahrenswert bis … Euro</th>
            <th>für jeden angefangenen Betrag von weiteren … Euro</th>
            <th>um … Euro</th>
        </tr>
        </thead>
        <tbody>
        <tr>
            <td>2 000</td>
            <td>500</td>
            <td>20</td>
        </tr>
        <tr>
            <td>10 000</td>
            <td>1 000</td>
            <td>21</td>
        </tr>
        <tr>
            <td>25 000</td>
            <td>3 000</td>
            <td>29</td>
        </tr>
        <tr>
            <td>50 000</td>
            <td>5 000</td>
            <td>38</td>
        </tr>
        <tr>
            <td>200 000</td>
            <td>15 000</td>
            <td>132</td>
        </tr>
        <tr>
            <td>500 000</td>
            <td>30 000</td>
            <td>198</td>
        </tr>
        <tr>
            <td>über 500 000</td>
            <td>50 000</td>
            <td>198</td>
        </tr>
        </tbody>
    </table>

    <!-- Inline Form -->
    <form id="calculatorForm" class="form-inline justify-content-center mt-4">
        <div class="form-group mb-2">
            <label for="amount" class="sr-only">Verfahrenswert</label>
            <input type="range" class="form-control" id="amount" value="500" step="500" min="500" max="1000000" required
                   oninput="calculate()">
        </div>
        <div class="form-group mb-2">
            <label for="factor" class="sr-only">Faktor</label>
            <input type="range" class="form-control" id="factor" value="2.0" step="0.5" min="0.5" max="2.0" required
                   onchange="calculate()">
        </div>
    </form>

    <table class="table table-bordered table-striped mt-4">
        <tbody>
        <tr>
            <th style="width:20%">Verfahrenswert</th>
            <td id="amountValue">500 EUR</td>
        </tr>
        <tr>
            <th>Faktor</th>
            <td id="factorValue">2</td>
        </tr>
        <tr>
            <th>Gerichtskosten</th>
            <td id="result">76 EUR</td>
        </tr>
        </tbody>
    </table>
</div>

<!-- JavaScript for calculation -->
<script>
    const rules = {
        500: () => 38,
        2_000: (amount = 2_000) => {
            const restAmount = rules[500]();
            console.log("500:", restAmount);
            return Math.ceil((amount - 500) / 500) * 20 + restAmount;
        },
        10_000: (amount = 10_000) => {
            const restAmount = rules[2_000]();
            console.log("2.000:", restAmount);
            return Math.ceil((amount - 2_000) / 1_000) * 21 + restAmount;
        },
        25_000: (amount = 25_000) => {
            const restAmount = rules[10_000]();
            console.log("10.000:", restAmount);
            return Math.ceil((amount - 10_000) / 3_000) * 29 + restAmount;
        },
        50_000: (amount = 50_000) => {
            const restAmount = rules[25_000]();
            console.log("25.000:", restAmount);
            return Math.ceil((amount - 25_000) / 5_000) * 38 + restAmount;
        },
        200_000: (amount = 200_000) => {
            const restAmount = rules[50_000]();
            console.log("50.000:", restAmount);
            return Math.ceil((amount - 50_000) / 15_000) * 132 + restAmount;
        },
        500_000: (amount = 500_000) => {
            const restAmount = rules[200_000]();
            console.log("200.000:", restAmount);
            return Math.ceil((amount - 200_000) / 30_000) * 198 + restAmount;
        },
        rest: (amount) => {
            const restAmount = rules[500_000]();
            console.log("500.000:", restAmount);
            return Math.ceil((amount - 500_000) / 50_000) * 198 + restAmount;
        }
    };

    const internalCalc = (target) => {
        if (target > 500_000) {
            console.log(`target ${target} > 500.000`);
            return rules.rest(target);
        } else if (target > 200_000) {
            console.log(`target ${target} > 200.000`);
            return rules[500_000](target);
        } else if (target > 50_000) {
            console.log(`target ${target} > 50.000`);
            return rules[200_000](target);
        } else if (target > 25_000) {
            console.log(`target ${target} > 25.000`);
            return rules[50_000](target);
        } else if (target > 10_000) {
            console.log(`target ${target} > 10.000`);
            return rules[25_000](target);
        } else if (target > 2_000) {
            console.log(`target ${target} > 2.000`);
            return rules[10_000](target);
        } else if (target > 500) {
            console.log(`target ${target} > 500`);
            return rules[2_000](target);
        } else {
            console.log(`target ${target} <= 500`);
            return rules[500](target);
        }
    };

    function calculate() {
        const amount = parseInt(document.getElementById("amount").value);
        document.getElementById("amountValue").textContent = amount;
        const factor = parseFloat(document.getElementById("factor").value);
        document.getElementById("factorValue").textContent = factor;
        document.getElementById("result").innerText = (internalCalc(amount) * factor) + " EUR";
    }
</script>

<!-- Bootstrap JS -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
        crossorigin="anonymous"></script>

</body>
</html>
